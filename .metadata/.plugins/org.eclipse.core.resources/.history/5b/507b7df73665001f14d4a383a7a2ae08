package com.example.demo;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.ResponseEntity;

import com.example.demo.DAO.EmployeeDatabase;
import com.example.demo.Model.Employee;
import com.example.demo.Service.EmployeeService;

@SpringBootTest
class DemoApplicationTests {

	@Autowired
	EmployeeDatabase dao;
	@Autowired
	EmployeeService empService;
	
	@Autowired
	static Employee emp;
	
	
	@BeforeAll
	public static void beforeTestStart()
	{
		emp = new Employee();
		emp.setCompany("XXXXX");
		emp.setDesignation("XXXX");
		emp.setName("TestUser");
			
	}
	
	@Test
	void addEmployeeTest() {
		
		empService.addEmployee(emp);
		assertEquals(true, findEmployeeByNameTest());
			
	}
	@Test
	
	void deleteEmployeeTest()
	{
		empService.deleteEmployee(emp);
		assertEquals(false, findEmployeeByNameTest());
	}
	
	@Test
	
	boolean findEmployeeByNameTest()
	{
		ResponseEntity<Employee> dbresult = empService.getEmployeeByName(emp.getName());

		if(dbresult.getBody()!=null)
		{
			
			assertTrue(true);
			return true;
		}
		else
		{
			assertFalse(false);
			return false;
		}
			
	}
}
